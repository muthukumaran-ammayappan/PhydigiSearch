<div class="container-fluid">
  <div class="row cardColor myContent-left justify-content-center">
    <div class="col-md-4 text-right">
      <div class="row mt-2 mb-4">
        <div class="col-md-2">
        </div>
        <div class="col-md-10 text-left">
          <label class="search-label text-left" for="search">Search your Local Pharmacy & Order Ahead</label>
          <div class="input-group col-md-12 ml-0 mr-0 pl-0 pr-0">
            <div class="input-group">
              <input class="form-control py-2 border-right-0 border search-placeholder" [(ngModel)]="searchValue"
                (input)="searchTimer($event.target.value)" type="search" value="search"
                placeholder="Search by Pharmacy,city, PIN code or area" id="search">
              <span class="input-group-append">
                <div class="input-group-text bg-white"><img src="/assets/images/Icon-ionic-ios-search.png" height="16px" width="16px"></div>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-4 text-center">
      <button class="button-open {{isOpen? 'colorGrey' : null}} " (click)="onClickOpen()"><i
          class="{{isOpen ? 'fa fa-check' : null}}"></i> Open
      </button>
      <button class="button-delivery {{isDeliveryEnable? 'colorGreyDelivery' : ''}}" (click)="onClickDelivery()"><i
          class="{{isDeliveryEnable ? 'fa fa-check' : null}}"></i> Delivery
      </button>
    </div>
    <div class="col-md-4 text-center slider-top">
      <div class="row">
        <div class="col-2 mt-3 p-0 text-right">
          <svg xmlns="http://www.w3.org/2000/svg" width="19.7" height="21.7" viewBox="0 0 19.7 21.7"><defs><style>.a{fill:none;stroke:#333;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.7px;}</style></defs><g transform="translate(-3.65 -2.15)"><path class="a" d="M4.5,10l9-7,9,7V21a2,2,0,0,1-2,2H6.5a2,2,0,0,1-2-2Z" transform="translate(0 0)"/><path class="a" d="M13.5,28.061V18h6.036V28.061" transform="translate(-3.018 -5.061)"/></g></svg>
        </div>
        <div class="col-8 m-0 p-0">
          <mat-slider [(ngModel)]="km" (valueChange)="searchTimer(searchValue)" [displayWith]="formatLabel"
            class="slider" thumbLabel min="1" max="7" step="1" value="3"></mat-slider>
        </div>
        <div class="col-2 mt-3 p-0 text-left">
          <img src="/assets/images/pharmacy.png" class="imageSize">
        </div>
      </div>
    </div>
  </div>
</div>

<app-loader *ngIf="loading"></app-loader>
<div class="lister" *ngIf="filteredPharmacies.length > 0 && !loading"><br>
  <div class="row"  >
    <p class="mb-0 search-result-count" style="margin-left: 30px;">About {{filteredPharmacies.length}}
      results (Near {{km}}km)</p>
  </div>
  <div class="row fullContainer" style="margin-top: -20px">
    <div *ngFor="let pharmacy of filteredPharmacies;let i = index" class="col-md-6">
      <div class="media">
        <img class="pharmacy-image" [src]=getImageFromService(pharmacy[0].imageLogoId) alt="Order Ahead">
        <div class="media-body pl-2">
          <div class="row m-0 p-0">
            <div class="col-md-10 p-0 m-0 col-sm-12 col-lg-10">
              <h5 class="pharmacy-name ml-0 p-0 m-0">{{pharmacy[0].registeredPharmacyName}}</h5>
              <h5 class="pharmacy-address">{{pharmacy[0].addressLine1}}</h5>
            </div>
            <div class="col-md-2 p-0 m-0 col-sm-12 col-lg-2">
              <p class="map-distance map-marker-logo p-0 m-0">
                <img src="/assets/images/location.png" style="margin-top: -5px" width="9c"> {{pharmacy[2] | number : '1.0-2'}}km</p>
            </div>
          </div>
          <h6 class="pharmacy-status mt-2">{{pharmacy[0].isOpen ? 'Closes at' : 'Opens at'}}
            {{pharmacy[0].isOpen ? tConvert(pharmacy[0].closeHour) : tConvert(pharmacy[0].startHour)}}</h6>
          <h6 class="delivery-available"><img src="/assets/images/greentick.png" height="7.5px" width="11px">
            {{pharmacy[0].homeDelivery == 'Y' ? 'Delivery Available' : 'Pick-up Only'}}
            &nbsp;&nbsp;|&nbsp;&nbsp;
            <img src="{{pharmacy[0].isOpen ? '/assets/images/greentick.png' : 'assets/images/wrong.png' }}" height="8px"
              width="9px">
            <span class="{{pharmacy[0].isOpen ? null : 'redColor'}}">
              {{pharmacy[0].isOpen ? "Open Now" : "Closed"}}</span></h6>

        </div>
      </div>
      <div class="row m-0 p-0" style="padding-top: 5px">
        <div class="col-md-2">
        </div>
        <div class="col-md-5 col-sm-12 text-left" style="padding-left: 0px!important;">
          <h5 class="pharmacy-mobile-call mt-2"><b class="call"><strong>Call: </strong>
            </b><span>
              &nbsp;{{pharmacy[1] | slice:0:3}}-{{pharmacy[1] | slice:3:7}}-{{pharmacy[1] | slice:7:10}}</span>
          </h5>
        </div>
        <div class="col-md-5 col-sm-12 text-right">
          <a class="link-blue" href='https://dev.phydigi.com/{{pharmacy[0].storeNumber}}/store'>
            <button class="order-button">Order Ahead</button>
          </a>
        </div>
      </div>
    </div>
  </div>

  <mat-paginator #paginator style-paginator [hidden]="isMobile" [length]="length" [pageIndex]="pageIndex[1]" [pageSize]="pageSize"
    (page)="pageEvent = OnPageChange($event)">
  </mat-paginator>
</div><br><br>
<div *ngIf="filteredPharmacies.length == 0 && !loading">
  <h1 class="no-results">No Results !</h1>
</div>
<div class="footer">
  <app-footer></app-footer>
</div>
<link rel="preconnect" href="https://fonts.gstatic.com">
<!--<link rel="stylesheet" href="../../styles.scss">-->
